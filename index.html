<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ±Ø´Ø© Ø§Ù„Ø¹Ù…Ù„ - Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- HTML2PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind Config -->
    <script>
        function setupTailwind() {
            if (typeof tailwind !== 'undefined') {
                tailwind.config = {
                    darkMode: 'class',
                    theme: {
                        extend: {
                            fontFamily: {
                                sans: ['Tajawal', 'sans-serif'],
                            },
                            colors: {
                                brand: {
                                    50: '#f0fdfa',
                                    100: '#ccfbf1',
                                    500: '#14b8a6',
                                    600: '#0d9488',
                                    800: '#115e59',
                                    900: '#134e4a',
                                }
                            }
                        }
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.tailwindcss.com" onload="setupTailwind()"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f8fafc;
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            padding: 1.5rem;
            transition: all 0.3s ease;
            border: 1px solid #f1f5f9;
            page-break-inside: avoid;
        }
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .insight-badge {
            background-color: #f0fdfa;
            color: #115e59;
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            border: 1px solid #ccfbf1;
        }
        /* Word Cloud Styling */
        .word-cloud span {
            display: inline-block;
            margin: 4px 10px;
            transition: all 0.3s;
            cursor: default;
            line-height: 1.6;
        }
        .word-cloud span:hover {
            color: #0d9488;
            transform: scale(1.15);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        /* Dark Mode Transitions */
        body, .card, nav, .text-slate-800, .text-slate-500 {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        .dark body {
            background-color: #0f172a;
            color: #f1f5f9;
        }
        .dark .card {
            background-color: #1e293b;
            border-color: #334155;
            color: #f1f5f9;
        }
        .dark .text-slate-800 { color: #f1f5f9; }
        .dark .text-slate-500 { color: #94a3b8; }
        .dark .text-slate-600 { color: #cbd5e1; }
        .dark .text-slate-700 { color: #e2e8f0; }
        .dark .bg-white { background-color: #1e293b; }
        .dark .border-slate-200 { border-color: #334155; }
        
        /* Magic Highlight Effect */
        @keyframes magicPulse {
            0% { box-shadow: 0 0 0 0 rgba(20, 184, 166, 0.7); transform: scale(1); }
            50% { box-shadow: 0 0 0 20px rgba(20, 184, 166, 0); transform: scale(1.02); }
            100% { box-shadow: 0 0 0 0 rgba(20, 184, 166, 0); transform: scale(1); }
        }
        .magic-highlight {
            animation: magicPulse 1.5s ease-out;
            border: 2px solid #14b8a6 !important;
            z-index: 50;
        }
    </style>
</head>
<body class="text-slate-800 dark:bg-slate-900 dark:text-slate-100">

    <!-- Navigation -->
    <nav class="bg-brand-900 text-white shadow-xl sticky top-0 z-50 backdrop-blur-md bg-opacity-95">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center gap-4">
                    <div class="bg-white/10 p-2 rounded-lg">
                        <i class="fa-solid fa-chart-pie text-2xl text-brand-100"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold tracking-wide">ØªÙ‚Ø±ÙŠØ± ÙˆØ±Ø´Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø´Ø§Ù…Ù„</h1>
                        <p class="text-xs text-brand-100 opacity-90">ØªØ­Ù„ÙŠÙ„ 278 Ù…Ø´Ø§Ø±Ùƒ | AI in Business</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="toggleTheme()" class="p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-all focus:outline-none" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">
                        <i id="themeIcon" class="fa-solid fa-moon text-lg"></i>
                    </button>
                    <button onclick="generatePDF()" class="bg-white text-brand-900 px-4 py-2 rounded-lg font-bold text-sm hover:bg-brand-50 transition-colors shadow-lg">
                        <i class="fa-solid fa-file-pdf ml-2"></i> ØªØ­Ù…ÙŠÙ„ PDF
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard -->
    <div id="dashboard-content" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">
        
        <!-- 1. High-Level KPIs -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="card border-b-4 border-brand-500 relative overflow-hidden">
                <div class="absolute top-0 left-0 p-4 opacity-10"><i class="fa-solid fa-users text-6xl"></i></div>
                <div class="text-slate-500 text-sm font-medium mb-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</div>
                <div class="text-4xl font-extrabold text-brand-900">278</div>
                <div class="text-xs font-bold text-emerald-600 mt-3 bg-emerald-50 inline-block px-2 py-1 rounded">
                    <i class="fa-solid fa-check"></i> Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©
                </div>
            </div>
            <div class="card border-b-4 border-blue-500 relative overflow-hidden">
                <div class="absolute top-0 left-0 p-4 opacity-10"><i class="fa-solid fa-cake-candles text-6xl"></i></div>
                <div class="text-slate-500 text-sm font-medium mb-1">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¹Ù…Ø±</div>
                <div class="text-4xl font-extrabold text-blue-900">29.5</div>
                <div class="text-xs text-slate-400 mt-3">Ø§Ù„ÙˆØ³ÙŠØ·: 27 | Ø§Ù„Ù…Ù†ÙˆØ§Ù„: 25</div>
            </div>
            <div class="card border-b-4 border-purple-500 relative overflow-hidden">
                <div class="absolute top-0 left-0 p-4 opacity-10"><i class="fa-solid fa-earth-asia text-6xl"></i></div>
                <div class="text-slate-500 text-sm font-medium mb-1">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ…Ø«ÙŠÙ„Ø§Ù‹</div>
                <div class="text-3xl font-extrabold text-purple-900 truncate">Ø§Ù„ÙŠÙ…Ù† ğŸ‡¾ğŸ‡ª</div>
                <div class="text-xs font-bold text-purple-600 mt-3">39.26% (106 Ù…Ø´Ø§Ø±Ùƒ)</div>
            </div>
            <div class="card border-b-4 border-orange-500 relative overflow-hidden">
                <div class="absolute top-0 left-0 p-4 opacity-10"><i class="fa-solid fa-graduation-cap text-6xl"></i></div>
                <div class="text-slate-500 text-sm font-medium mb-1">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¦Ø¯</div>
                <div class="text-3xl font-extrabold text-orange-900">Ù…Ø¨ØªØ¯Ø¦</div>
                <div class="text-xs font-bold text-orange-600 mt-3">42.96% Ù…Ù† Ø§Ù„Ø­Ø¶ÙˆØ±</div>
            </div>
        </div>

        <!-- 2. Demographics (Detailed) -->
        <div>
            <div class="flex items-center gap-2 mb-4 border-b pb-2 border-slate-200">
                <i class="fa-solid fa-id-card text-brand-600"></i>
                <h2 class="text-xl font-bold text-slate-800">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙŠÙ…ÙˆØºØ±Ø§ÙÙŠØ© (Demographics)</h2>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Age Distribution Simulation -->
                <div class="card lg:col-span-1">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="font-bold text-slate-700">ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø¹Ù…Ø±ÙŠØ©</h3>
                        <span class="insight-badge">75% Ø´Ø¨Ø§Ø¨ (&le;33)</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="ageChart"></canvas>
                    </div>
                </div>
                <!-- Gender & Student Split (Combined Visual) -->
                <div class="card lg:col-span-1">
                    <h3 class="font-bold text-slate-700 mb-4 text-center">Ø§Ù„Ø¬Ù†Ø³ ÙˆØ§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h3>
                    <div class="grid grid-cols-2 gap-2 h-full pb-8">
                        <div class="relative h-48 w-full">
                            <canvas id="genderChart"></canvas>
                            <p class="text-center text-xs mt-2 font-bold">86% Ø°ÙƒÙˆØ±</p>
                        </div>
                        <div class="relative h-48 w-full">
                            <canvas id="studentChart"></canvas>
                            <p class="text-center text-xs mt-2 font-bold">43% Ø·Ù„Ø§Ø¨</p>
                        </div>
                    </div>
                </div>
                <!-- Countries -->
                <div class="card lg:col-span-1">
                    <h3 class="font-bold text-slate-700 mb-4">Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (Ø£Ø¹Ù„Ù‰ 5)</h3>
                    <div class="chart-container">
                        <canvas id="countryChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. AI Knowledge Analysis (Deep Dive) -->
        <div>
            <div class="flex items-center gap-2 mb-4 border-b pb-2 border-slate-200">
                <i class="fa-solid fa-brain text-brand-600"></i>
                <h2 class="text-xl font-bold text-slate-800">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ§Ù„Ø®Ø¨Ø±Ø© (AI Knowledge)</h2>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <!-- Overall Knowledge -->
                <div class="card lg:col-span-4">
                    <h3 class="font-bold text-slate-700 mb-2">Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
                    <p class="text-xs text-slate-400 mb-4">20% Ø¨Ø¯ÙˆÙ† Ø®Ø¨Ø±Ø© Ø³Ø§Ø¨Ù‚Ø© (ÙØ±ØµØ© Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„ØªØ£Ø³ÙŠØ³ÙŠ)</p>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="knowledgeChart"></canvas>
                    </div>
                </div>
                <!-- Cross Analysis: Gender vs Knowledge -->
                <div class="card lg:col-span-4">
                    <h3 class="font-bold text-slate-700 mb-2">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¬Ù†Ø³</h3>
                    <p class="text-xs text-slate-400 mb-4">Ù„Ø§Ø­Ø¸: 100% Ù…Ù† Ø§Ù„Ø®Ø¨Ø±Ø§Ø¡ Ø°ÙƒÙˆØ±</p>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="knowledgeGenderChart"></canvas>
                    </div>
                </div>
                <!-- Age vs Knowledge -->
                <div class="card lg:col-span-4">
                    <h3 class="font-bold text-slate-700 mb-2">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¹Ù…Ø± Ø­Ø³Ø¨ Ø§Ù„Ø®Ø¨Ø±Ø©</h3>
                    <p class="text-xs text-slate-400 mb-4">Ø§Ø±ØªØ¨Ø§Ø· Ø·Ø±Ø¯ÙŠ: ÙƒÙ„Ù…Ø§ Ø²Ø§Ø¯Øª Ø§Ù„Ø®Ø¨Ø±Ø© Ø²Ø§Ø¯ Ø§Ù„Ø¹Ù…Ø±</p>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="ageKnowledgeChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. Motivation & Preferences -->
        <div>
            <div class="flex items-center gap-2 mb-4 border-b pb-2 border-slate-200">
                <i class="fa-solid fa-heart text-brand-600"></i>
                <h2 class="text-xl font-bold text-slate-800">Ø§Ù„Ø¯ÙˆØ§ÙØ¹ ÙˆØ§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª (Motivations & Preferences)</h2>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Reasons for Joining -->
                <div class="card lg:col-span-1">
                    <h3 class="font-bold text-slate-700 mb-4">Ø£Ù‡Ù… Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</h3>
                    <div class="chart-container">
                        <canvas id="reasonsChart"></canvas>
                    </div>
                </div>
                <!-- Timing Comparison -->
                <div class="card lg:col-span-1">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="font-bold text-slate-700">ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„ØªÙˆÙ‚ÙŠØª (ØµØ¨Ø§Ø­ÙŠ vs Ù…Ø³Ø§Ø¦ÙŠ)</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="timingChart"></canvas>
                    </div>
                    <div class="text-xs text-center mt-2 text-slate-500">
                        <span class="inline-block w-3 h-3 bg-yellow-400 rounded-full mr-1"></span> ØµØ¨Ø§Ø­ Ø§Ù„Ø³Ø¨Øª (Ø§Ù„Ø£Ø¹Ù„Ù‰)
                        <span class="inline-block w-3 h-3 bg-slate-800 rounded-full mr-1 ml-2"></span> Ù…Ø³Ø§Ø¡ Ø§Ù„Ø¬Ù…Ø¹Ø©
                    </div>
                </div>
                <!-- Engagement Metrics -->
                <div class="card lg:col-span-1 flex flex-col justify-center">
                    <div class="text-center mb-8">
                        <h3 class="text-lg font-bold text-slate-700">Ø§Ù„Ø±ØºØ¨Ø© ÙÙŠ Ù…ÙˆØ§Ø¯ Ø¥Ø¶Ø§ÙÙŠØ©</h3>
                        <div class="text-5xl font-extrabold text-brand-600 mt-2">97.4%</div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mt-2 max-w-[200px] mx-auto">
                            <div class="bg-brand-600 h-2.5 rounded-full" style="width: 97.4%"></div>
                        </div>
                    </div>
                    <div class="text-center">
                        <h3 class="text-lg font-bold text-slate-700">Ø§Ù„Ø­Ù…Ø§Ø³ Ù„ÙˆØ±Ø´ Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©</h3>
                        <div class="text-5xl font-extrabold text-pink-600 mt-2">99.6%</div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mt-2 max-w-[200px] mx-auto">
                            <div class="bg-pink-600 h-2.5 rounded-full" style="width: 99.6%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. Word Cloud & Qualitative -->
        <div class="card bg-gradient-to-br from-white to-brand-50 border-brand-100">
            <h3 class="font-bold text-slate-800 mb-4 text-center text-lg">Ø³Ø­Ø§Ø¨Ø© Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</h3>
            <div id="wordCloud" class="word-cloud text-center py-4 min-h-[150px] flex flex-wrap justify-center items-center content-center">
                <!-- JS Populated -->
            </div>
        </div>

        <!-- 6. Detailed Insights Report (Textual) -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mt-8">
            <h2 class="text-xl font-bold text-brand-900 mb-6 flex items-center gap-2">
                <i class="fa-solid fa-list-check"></i> Ù…Ù„Ø®Øµ Ø§Ù„Ø±Ø¤Ù‰ Ø§Ù„ØªØ­Ù„ÙŠÙ„ÙŠØ© (Insights Report)
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-sm leading-relaxed">
                <!-- Column 1 -->
                <div>
                    <h4 class="font-bold text-slate-800 mb-2 border-b border-brand-100 pb-1">ğŸŒ Ø§Ù„ØªØ±ÙƒÙŠØ¨Ø© Ø§Ù„Ø³ÙƒØ§Ù†ÙŠØ©</h4>
                    <ul class="list-disc list-inside space-y-1 text-slate-600 marker:text-brand-500">
                        <li>Ù‚Ø§Ø¹Ø¯Ø© Ø´Ø¨Ø§Ø¨ÙŠØ© Ø¨Ø§Ù…ØªÙŠØ§Ø²: <strong>75%</strong> Ù…Ù† Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† ØªØ­Øª Ø³Ù† 33 Ø¹Ø§Ù…Ø§Ù‹.</li>
                        <li>Ù‡ÙŠÙ…Ù†Ø© Ø°ÙƒÙˆØ±ÙŠØ© Ø¨Ù†Ø³Ø¨Ø© <strong>85.5%</strong>ØŒ Ù…Ø¹ ÙˆØ¬ÙˆØ¯ ÙØ±ØµØ© Ù„Ø²ÙŠØ§Ø¯Ø© ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¥Ù†Ø§Ø«.</li>
                        <li>Ø§Ù„Ø·Ù„Ø§Ø¨ ÙŠØ´ÙƒÙ„ÙˆÙ† <strong>43%</strong>ØŒ Ù…Ù…Ø§ ÙŠØ¨Ø±Ø± Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¹Ø§Ù„ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ£Ø³ÙŠØ³ÙŠ.</li>
                        <li>Ø§Ù„ÙŠÙ…Ù† ØªØªØµØ¯Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© (39%) ØªÙ„ÙŠÙ‡Ø§ Ù…ØµØ± (20%)ØŒ Ù…Ù…Ø§ ÙŠØ´ÙŠØ± Ù„Ø³ÙˆÙ‚ Ù‚ÙˆÙŠ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆÙ„.</li>
                    </ul>

                    <h4 class="font-bold text-slate-800 mb-2 border-b border-brand-100 pb-1 mt-4">ğŸ“ Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ§Ù„Ø®Ø¨Ø±Ø©</h4>
                    <ul class="list-disc list-inside space-y-1 text-slate-600 marker:text-brand-500">
                        <li><strong>70%</strong> Ù…Ù† Ø§Ù„Ø­Ø¶ÙˆØ± Ù…Ø¨ØªØ¯Ø¦ÙˆÙ† Ø£Ùˆ Ø¨Ø¯ÙˆÙ† Ø®Ø¨Ø±Ø© Ø³Ø§Ø¨Ù‚Ø©.</li>
                        <li>Ø§Ù„ÙØ¬ÙˆØ© Ø§Ù„Ø¬Ù†Ø¯Ø±ÙŠØ© ØªØªØ³Ø¹ Ù…Ø¹ Ø§Ù„Ø®Ø¨Ø±Ø©: <strong>100%</strong> Ù…Ù† ÙØ¦Ø© "Ø®Ø¨ÙŠØ±" Ù‡Ù… Ø°ÙƒÙˆØ±.</li>
                        <li>Ø§Ù„Ø®Ø¨Ø±Ø§Ø¡ (1.5% ÙÙ‚Ø·) Ù‡Ù… Ø§Ù„Ø£ÙƒØ¨Ø± Ø³Ù†Ø§Ù‹ (Ù…ØªÙˆØ³Ø· 40 Ø³Ù†Ø©) ÙˆØºÙŠØ± Ø·Ù„Ø§Ø¨ ÙƒÙ„ÙŠØ§Ù‹.</li>
                        <li>Ø§Ù„Ø·Ù„Ø§Ø¨ Ù‡Ù… Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø£ÙƒØ¨Ø± Ø¶Ù…Ù† "Ø¨Ø¯ÙˆÙ† Ø®Ø¨Ø±Ø© Ø³Ø§Ø¨Ù‚Ø©" (53% Ù…Ù†Ù‡Ù… Ø·Ù„Ø§Ø¨).</li>
                    </ul>
                </div>

                <!-- Column 2 -->
                <div>
                    <h4 class="font-bold text-slate-800 mb-2 border-b border-brand-100 pb-1">ğŸš€ Ø§Ù„Ø¯ÙˆØ§ÙØ¹ ÙˆØ§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª</h4>
                    <ul class="list-disc list-inside space-y-1 text-slate-600 marker:text-brand-500">
                        <li>Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ÙˆÙ† ÙŠØ¨Ø­Ø«ÙˆÙ† Ø¹Ù† "Ø§Ù„ØªØ¹Ù„Ù…"ØŒ Ø¨ÙŠÙ†Ù…Ø§ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙˆÙ† ÙŠØ±ÙƒØ²ÙˆÙ† Ø¹Ù„Ù‰ "Ø±ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„".</li>
                        <li>Ø§Ù„Ø®Ø¨Ø±Ø§Ø¡ ÙŠÙ‡ØªÙ…ÙˆÙ† Ø¨Ø´ÙƒÙ„ Ø®Ø§Øµ Ø¨Ù€ "Ø§Ù„ØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯ÙŠ".</li>
                        <li><strong>99.6%</strong> Ù…Ø¹Ø¯Ù„ Ø­Ù…Ø§Ø³ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ Ù„ÙˆØ±Ø´ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„.</li>
                        <li>Ø·Ù„Ø¨ ÙƒØ§Ø³Ø­ Ù„Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© (97%) ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø±ØºØ¨Ø© ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø±.</li>
                    </ul>

                    <h4 class="font-bold text-slate-800 mb-2 border-b border-brand-100 pb-1 mt-4">ğŸ“… Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠØ©</h4>
                    <ul class="list-disc list-inside space-y-1 text-slate-600 marker:text-brand-500">
                        <li><strong>Ø§Ù„Ø³Ø¨Øª ØµØ¨Ø§Ø­Ø§Ù‹</strong> Ù‡Ùˆ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø°Ù‡Ø¨ÙŠ (35% ØªÙØ¶ÙŠÙ„).</li>
                        <li><strong>Ø§Ù„Ø¬Ù…Ø¹Ø© Ù…Ø³Ø§Ø¡Ù‹</strong> Ù‡Ùˆ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠ Ø§Ù„Ù…ÙØ¶Ù„ (26%).</li>
                        <li>Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø£ØµØºØ± Ø³Ù†Ø§Ù‹ ØªÙØ¶Ù„ Ø¹Ø·Ù„Ø§Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹.</li>
                        <li>Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙˆÙ† ÙˆØ§Ù„Ø®Ø¨Ø±Ø§Ø¡ ÙŠØ¸Ù‡Ø±ÙˆÙ† Ù…Ø±ÙˆÙ†Ø© Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª.</li>
                    </ul>
                </div>
            </div>
        </div>

        <footer class="text-center text-slate-400 text-xs py-6">
            ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù„Ù€ 270 Ù…Ø´Ø§Ø±Ùƒ | aiNarabic Workshop
        </footer>

    </div>

    <!-- Floating Magic Button -->
    <button onclick="triggerMagicInsight()" class="fixed bottom-8 right-8 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-transform z-50 group">
        <i class="fa-solid fa-wand-magic-sparkles text-2xl group-hover:rotate-12 transition-transform"></i>
        <span class="absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-slate-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
            Ø§ÙƒØªØ´Ù Ù…Ø¹Ù„ÙˆÙ…Ø© Ø³Ø­Ø±ÙŠØ©
        </span>
    </button>

    <!-- LOGIC SCRIPT -->
    <script>
        window.addEventListener('load', function() {
            if (typeof Chart === 'undefined') return;

            Chart.defaults.font.family = 'Tajawal';
            Chart.defaults.color = '#64748b';
            Chart.defaults.borderColor = '#f1f5f9';

            // 1. Age Group Chart (Simulation based on: 25% <=23, 75% <=33, Range 16-59)
            // Creating 5 buckets
            new Chart(document.getElementById('ageChart'), {
                type: 'bar',
                data: {
                    labels: ['16-20', '21-25', '26-30', '31-40', '40+'],
                    datasets: [{
                        label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†',
                        // Estimated counts to match the stats provided
                        data: [30, 95, 80, 50, 15], 
                        backgroundColor: '#14b8a6',
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, grid: { display: false } } }
                }
            });

            // 2. Gender Chart
            new Chart(document.getElementById('genderChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Ø°ÙƒÙˆØ±', 'Ø¥Ù†Ø§Ø«'],
                    datasets: [{
                        data: [85.56, 14.44],
                        backgroundColor: ['#3b82f6', '#ec4899'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: { legend: { display: false } }
                }
            });

            // 3. Student Chart
            new Chart(document.getElementById('studentChart'), {
                type: 'doughnut',
                data: {
                    labels: ['ØºÙŠØ± Ø·Ø§Ù„Ø¨', 'Ø·Ø§Ù„Ø¨'],
                    datasets: [{
                        data: [56.67, 43.33],
                        backgroundColor: ['#64748b', '#f59e0b'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: { legend: { display: false } }
                }
            });

            // 4. Country Chart
            new Chart(document.getElementById('countryChart'), {
                type: 'bar',
                data: {
                    labels: ['Ø§Ù„ÙŠÙ…Ù†', 'Ù…ØµØ±', 'Ø§Ù„Ù…ØºØ±Ø¨', 'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', 'Ø³ÙˆØ±ÙŠØ§'],
                    datasets: [{
                        label: 'Ø§Ù„Ø¹Ø¯Ø¯',
                        data: [106, 54, 26, 16, 14],
                        backgroundColor: ['#115e59', '#0d9488', '#14b8a6', '#2dd4bf', '#5eead4'],
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { x: { grid: { display: false } } }
                }
            });

            // 5. Knowledge Chart (Overall)
            new Chart(document.getElementById('knowledgeChart'), {
                type: 'pie',
                data: {
                    labels: ['Ù…Ø¨ØªØ¯Ø¦ (43%)', 'Ù…ØªÙˆØ³Ø· (28%)', 'Ø¨Ø¯ÙˆÙ† Ø®Ø¨Ø±Ø© (20%)', 'Ù…ØªÙ‚Ø¯Ù… (8%)', 'Ø®Ø¨ÙŠØ± (1.5%)'],
                    datasets: [{
                        data: [42.96, 27.78, 20.00, 7.78, 1.48],
                        backgroundColor: ['#34d399', '#10b981', '#9ca3af', '#059669', '#064e3b'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'right', labels: { font: { size: 11 } } } }
                }
            });

            // 6. Knowledge by Gender (Stacked)
            // Based on: NoPrior(M79/F20), Beg(M84/F15), Int(M86/F13), Adv(M90/F9), Exp(M100/F0)
            new Chart(document.getElementById('knowledgeGenderChart'), {
                type: 'bar',
                data: {
                    labels: ['Ø¨Ø¯ÙˆÙ† Ø®Ø¨Ø±Ø©', 'Ù…Ø¨ØªØ¯Ø¦', 'Ù…ØªÙˆØ³Ø·', 'Ù…ØªÙ‚Ø¯Ù…', 'Ø®Ø¨ÙŠØ±'],
                    datasets: [
                        {
                            label: 'Ø°ÙƒÙˆØ±',
                            data: [79.63, 84.48, 86.67, 90.48, 100],
                            backgroundColor: '#3b82f6',
                            stack: 'Stack 0'
                        },
                        {
                            label: 'Ø¥Ù†Ø§Ø«',
                            data: [20.37, 15.52, 13.33, 9.52, 0],
                            backgroundColor: '#ec4899',
                            stack: 'Stack 0'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { x: { stacked: true }, y: { stacked: true, max: 100 } },
                    plugins: { legend: { position: 'bottom' } }
                }
            });

            // 7. Age by Knowledge
            new Chart(document.getElementById('ageKnowledgeChart'), {
                type: 'line',
                data: {
                    labels: ['Ø¨Ø¯ÙˆÙ† Ø®Ø¨Ø±Ø©', 'Ù…Ø¨ØªØ¯Ø¦', 'Ù…ØªÙˆØ³Ø·', 'Ù…ØªÙ‚Ø¯Ù…', 'Ø®Ø¨ÙŠØ±'],
                    datasets: [{
                        label: 'Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¹Ù…Ø±',
                        data: [25.91, 29.75, 30.27, 32.57, 39.75],
                        backgroundColor: 'rgba(249, 115, 22, 0.2)',
                        borderColor: '#f97316',
                        borderWidth: 3,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#f97316',
                        pointRadius: 5,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { min: 20, max: 45 } },
                    plugins: { legend: { display: false } }
                }
            });

            // 8. Reasons Chart
            new Chart(document.getElementById('reasonsChart'), {
                type: 'bar',
                data: {
                    labels: ['Ø§Ù„ØªØ¹Ù„Ù…', 'ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª', 'Ø±ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„', 'Ø´ØºÙ Ø§Ù„Ø±ÙŠØ§Ø¯Ø©', 'Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯'],
                    datasets: [{
                        label: 'Ø§Ù„Ù†Ø³Ø¨Ø©',
                        data: [10.74, 8.52, 7.78, 7.04, 5.93],
                        backgroundColor: '#6366f1',
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });

            // 9. Timing Preference Comparison
            new Chart(document.getElementById('timingChart'), {
                type: 'bar',
                data: {
                    labels: ['Ø§Ù„Ø³Ø¨Øª', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡'],
                    datasets: [
                        {
                            label: 'ØµØ¨Ø§Ø­ÙŠ',
                            data: [35.19, 18.89, 12.22, 12.59],
                            backgroundColor: '#facc15',
                            borderRadius: 4
                        },
                        {
                            label: 'Ù…Ø³Ø§Ø¦ÙŠ',
                            data: [19.26, 26.67, 18.15, 5.00], // Wed evening est low
                            backgroundColor: '#1e293b',
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } } // Custom legend in HTML
                }
            });

            // 10. Word Cloud Generation
            const words = [
                {text: 'Ø§Ù„ØªØ¹Ù„Ù… (Learning)', size: 32, color: '#0d9488', w: 700},
                {text: 'ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª', size: 24, color: '#0f766e', w: 600},
                {text: 'Ø±ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„', size: 22, color: '#f59e0b', w: 600},
                {text: 'Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ', size: 28, color: '#115e59', w: 700},
                {text: 'Ø¨Ù†Ø§Ø¡ Ù…Ø´Ø§Ø±ÙŠØ¹', size: 18, color: '#6366f1', w: 500},
                {text: 'ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø±', size: 16, color: '#ec4899', w: 500},
                {text: 'Generative AI', size: 20, color: '#8b5cf6', w: 600},
                {text: 'Ø´ØºÙ', size: 18, color: '#ef4444', w: 500},
                {text: 'ÙØ¶ÙˆÙ„', size: 14, color: '#64748b', w: 400},
                {text: 'Ø´Ù‡Ø§Ø¯Ø©', size: 14, color: '#64748b', w: 400}
            ];
            const cloud = document.getElementById('wordCloud');
            words.forEach(item => {
                const span = document.createElement('span');
                span.innerText = item.text;
                span.style.fontSize = item.size + 'px';
                span.style.color = item.color;
                span.style.fontWeight = item.w;
                cloud.appendChild(span);
            });

        });

        // Theme Toggle Logic
        function toggleTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('themeIcon');
            
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                icon.classList.replace('fa-sun', 'fa-moon');
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.add('dark');
                icon.classList.replace('fa-moon', 'fa-sun');
                localStorage.setItem('theme', 'dark');
            }
        }

        // Initialize Theme
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            document.getElementById('themeIcon').classList.replace('fa-moon', 'fa-sun');
        }

        // Magic Insight Logic
        function triggerMagicInsight() {
            // 1. Confetti Explosion
            const duration = 2000;
            const end = Date.now() + duration;

            (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#14b8a6', '#ec4899', '#f59e0b']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#14b8a6', '#ec4899', '#f59e0b']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());

            // 2. Select Random Card/Chart
            const cards = document.querySelectorAll('.card');
            const randomCard = cards[Math.floor(Math.random() * cards.length)];

            // 3. Scroll to it
            randomCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

            // 4. Highlight Effect
            randomCard.classList.add('magic-highlight');
            setTimeout(() => {
                randomCard.classList.remove('magic-highlight');
            }, 2000);
        }

        // PDF Function
        async function generatePDF() {
            if (typeof html2pdf === 'undefined') {
                alert('Ø§Ù„Ù…ÙƒØªØ¨Ø© ØºÙŠØ± Ø¬Ø§Ù‡Ø²Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...');
                return;
            }
            
            const btn = document.querySelector('nav button');
            const originalBtnContent = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©';

            // 1. Capture current theme and force Light Mode for print
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');
            if (isDark) html.classList.remove('dark');

            // 2. Create a clone of the dashboard to manipulate
            const originalElement = document.getElementById('dashboard-content');
            const clone = originalElement.cloneNode(true);

            // 3. Handle Canvases (Chart.js canvases need to be converted to images in the clone)
            // html2canvas sometimes struggles with live canvases, so we snapshot them.
            const originalCanvases = originalElement.querySelectorAll('canvas');
            const cloneCanvases = clone.querySelectorAll('canvas');

            originalCanvases.forEach((canvas, index) => {
                if (cloneCanvases[index]) {
                    const img = document.createElement('img');
                    img.src = canvas.toDataURL('image/png');
                    img.style.width = '100%';
                    img.style.height = 'auto';
                    img.className = canvas.className; 
                    cloneCanvases[index].parentNode.replaceChild(img, cloneCanvases[index]);
                }
            });

            // 4. Setup Container for PDF Generation (Fixed width, Light Mode)
            // We wrap the clone in a container that enforces a desktop width (1200px)
            // to prevent the mobile layout from triggering and stacking charts.
            const container = document.createElement('div');
            container.id = 'pdf-container';
            container.style.position = 'absolute';
            container.style.top = '0';
            container.style.left = '0';
            container.style.width = '1200px'; // Force desktop width
            container.style.zIndex = '-1000'; // Hide behind everything
            container.style.backgroundColor = '#ffffff';
            container.className = 'text-slate-800 bg-white'; // Tailwind classes for light mode
            
            container.appendChild(clone);
            document.body.appendChild(container);

            // 5. Generate PDF
            const opt = {
                margin: [10, 10],
                filename: 'AI_Workshop_Report_Full.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true, windowWidth: 1200 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            try {
                await html2pdf().set(opt).from(clone).save();
            } catch (err) {
                console.error('PDF Generation Error:', err);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù„Ù.');
            } finally {
                // 6. Cleanup & Restore Theme
                document.body.removeChild(container);
                if (isDark) html.classList.add('dark');
                btn.innerHTML = originalBtnContent;
            }
        }
    </script>
</body>
</html>
